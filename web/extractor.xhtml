<ui:composition template="layout.xhtml"
				xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:jsf="http://xmlns.jcp.org/jsf"
				xmlns:p="http://primefaces.org/ui">
	<ui:define name="main-content">
        <div class="card-header">
            <ul class="nav nav-tabs card-header-tabs">
                <li class="nav-item">
                    <a class="nav-link" href="search-by-gene.xhtml?datasetId=#{extractorManagedBean.dataset.id}">By gene</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active">By position</a>
                </li>
            </ul>
        </div>
		<div class="row top-buffer">
			<div class="col-sm-9">
				<form jsf:id="form">
					<fieldset>
						<legend>Setup extraction</legend>
						<div class="form-group row">
							<label class="col-sm-4 col-form-label" for="select">Pick chromosome</label>
							<div class="col-sm-8">
								<h:selectOneMenu id="select" name="chromosome" value="#{extractorManagedBean.selectedChromosome}" class="form-control">
									<f:selectItems value="#{extractorManagedBean.reference.chromosomes}" var="chromosome" itemValue="#{chromosome.name}" itemLabel="#{chromosome.name}"/>
								</h:selectOneMenu>
							</div>
						</div>
						<div class="form-group row">
							<label class="col-sm-4 col-form-label" for="start">Start</label>
							<div class="col-sm-8">
								<input class="form-control" type="text" name="start" id="start" placeholder="1" jsf:value="#{extractorManagedBean.extractStart}"/>
							</div>
						</div>
						<div class="form-group row">
							<label class="col-sm-4 col-form-label" for="end">End</label>
							<div class="col-sm-8">
								<input class="form-control" type="text" name="end" id="end" placeholder="300000" jsf:value="#{extractorManagedBean.extractEnd}"/>
							</div>
						</div>
						<div class="form-group row">
							<div class="mx-auto col-sm-4">
								<h:commandButton type="submit" class="form-control" value="Extract">
									<p:fileDownload value="#{extractorManagedBean.file}" />
								</h:commandButton>
							</div>
						</div>
					</fieldset>
				</form>
			</div>
			<div class="col-sm-3">
				<table class="table table-striped table-bordered">
					<thead>
					<tr>
						<th>Chromosome</th>
						<th>Length</th>
					</tr>
					</thead>
					<tbody>
					<ui:repeat value="#{extractorManagedBean.reference.chromosomes}" var="chromosome">
						<tr>
							<td>#{chromosome.name}</td>
							<td>
								<h:outputText value="#{chromosome.length}">
									<f:convertNumber pattern="#,###"/>
								</h:outputText>
							</td>
						</tr>
					</ui:repeat>
					</tbody>
				</table>
			</div>
		</div>
	</ui:define>
</ui:composition>